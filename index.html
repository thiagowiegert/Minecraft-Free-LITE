<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Mine-LITE-Api</title>

<style>
:root{
  --primary:#43a047;
  --primary-dark:#2e7d32;
  --whatsapp:#25D366;
  --whatsapp-dark:#128C7E;
  --bg:#292929;
}

*{box-sizing:border-box;margin:0;padding:0}

body{
  font-family:Arial,sans-serif;
  background:linear-gradient(rgba(0,0,0,.60),rgba(0,0,0,.7)),
  url('https://i.imgur.com/CFc3sKb.jpeg') center/cover fixed;
  color:#fff;
  height:100vh;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
}

.box{
  background:var(--panel);
  padding:25px;
  width:100%;
  max-width:350px;
  text-align:center;
  max-height:90vh;
  overflow:hidden;
}

h1{
  color:var(--primary);
  margin-bottom:10px;
}

.badge{
  display:none;
  background:gold;
  color:#000;
  font-size:.7rem;
  padding:2px 6px;
  border-radius:6px;
  margin-left:6px;
  font-weight:bold;
}

.select-label{
  text-align:left;
  font-size:.9rem;
  opacity:.9;
  margin-bottom:4px;
}

select{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:none;
  margin-bottom:10px;
  background:#2a2a2a;
  color:#fff;
  font-size:1rem;
}

select option{color:#000}

#info{
  text-align:left;
  font-size:.85rem;
  opacity:.85;
  margin-bottom:12px;
  max-height:160px;
  overflow-y:auto;
  padding-right:6px;
}

#info::-webkit-scrollbar{
  width:6px;
}
#info::-webkit-scrollbar-thumb{
  background:var(--primary);
  border-radius:10px;
}

.btn{
  display:block;
  background:var(--primary);
  color:#fff;
  padding:12px;
  border-radius:8px;
  margin:10px 0;
  text-decoration:none;
  font-weight:bold;
  transition:.2s;
}

.btn:hover{background:var(--primary-dark)}

.btn-whatsapp{
  background:var(--whatsapp);
}

.btn-whatsapp:hover{
  background:var(--whatsapp-dark);
}

.toast{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:var(--primary);
  color:#fff;
  padding:10px 18px;
  border-radius:20px;
  font-size:.9rem;
  font-weight:bold;
  display:none;
  z-index:999;
}

footer{
  margin-top:12px;
  opacity:.65;
  font-size:.8rem;
  line-height:1.3rem;
}
</style>
</head>

<body>

<div class="toast" id="toast">üöÄ Nueva versi√≥n disponible</div>

<div class="box">
  <h1>
    Mine-LITE-Api
    <span class="badge" id="badge">NEW</span>
  </h1>

  <p>Descarga cualquier versi√≥n desde nuestros servidores.</p>

  <label class="select-label">Elige una versi√≥n:</label>
  <select id="versionSelector">
    <option>Cargando versiones...</option>
  </select>

  <div id="info">Selecciona una versi√≥n para ver detalles</div>

  <a id="downloadBtn" class="btn" href="#">Descargar APK</a>

  <a class="btn btn-whatsapp"
     href="https://whatsapp.com/channel/0029Vb6os8sEquiSiC9mHw1M"
     target="_blank">
    Canal de WhatsApp
  </a>

  <footer>
    ¬© 2025 Minecraft Free<br>
    P√°gina LITE v1.2
  </footer>
</div>

<script>
const repo = "thiagowiegert/Mine-LITE-Api";
const selector = document.getElementById("versionSelector");
const btn = document.getElementById("downloadBtn");
const info = document.getElementById("info");
const badge = document.getElementById("badge");
const toast = document.getElementById("toast");

const LAST_SEEN = "liteLastSeenRelease";

async function loadReleases(){
  try{
    const res = await fetch(
      `https://api.github.com/repos/${repo}/releases`
    );
    const releases = await res.json();

    selector.innerHTML="";

    releases.sort(
      (a,b)=>new Date(b.published_at)-new Date(a.published_at)
    );

    releases.forEach(rel=>{
      const apk = rel.assets?.find(a=>a.name.endsWith(".apk"));
      if(!apk) return;

      const op = document.createElement("option");
      op.value = apk.browser_download_url;
      op.textContent = rel.tag_name || rel.name || "Versi√≥n sin nombre";

      op.dataset.size = (apk.size/1024/1024).toFixed(2)+" MB";
      op.dataset.date = rel.published_at;
      op.dataset.notes =
        (rel.body||"Sin notas").replace(/\n/g,"<br>");

      selector.appendChild(op);
    });

    if(selector.options.length){
      selector.selectedIndex=0;
      updateInfo();
      checkNewVersion();
    }

  }catch(e){
    info.innerHTML="‚ùå Error cargando versiones";
    console.error(e);
  }
}

function updateInfo(){
  const opt = selector.selectedOptions[0];
  btn.href = opt.value;

  info.innerHTML=`
    <strong>üìù Notas:</strong><br>${opt.dataset.notes}<br><br>
    <strong>üì¶ Tama√±o:</strong> ${opt.dataset.size}<br>
    <strong>üìÖ Lanzamiento:</strong>
    ${new Date(opt.dataset.date).toLocaleDateString()}
  `;

  localStorage.setItem(LAST_SEEN,opt.dataset.date);
  badge.style.display="none";
}

function checkNewVersion(){
  const lastSeen = localStorage.getItem(LAST_SEEN);
  const latest = selector.selectedOptions[0].dataset.date;

  if(!lastSeen || new Date(latest) > new Date(lastSeen)){
    badge.style.display="inline-block";
    toast.style.display="block";
    setTimeout(()=>toast.style.display="none",5000);
  }
}

selector.addEventListener("change",updateInfo);
loadReleases();
</script>

</body>
</html>