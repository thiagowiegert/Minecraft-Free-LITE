<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mine-LITE-Api</title>

<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #000 url('https://raw.githubusercontent.com/thiagowiegert/Minecraft-Free/refs/heads/main/releases/minecraft.jpg') center/cover fixed no-repeat;
    color: #fff;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .box {
    background: rgba(0,0,0,0.65);
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    width: 100%;
    max-width: 350px;
  }

  h1 {
    color: #43a047;
    margin-bottom: 10px;
  }

  .select-label {
    text-align: left;
    font-size: 0.9rem;
    opacity: 0.9;
    margin-bottom: 4px;
  }

  select {
    width: 100%;
    padding: 10px;
    border-radius: 6px;
    border: none;
    margin-bottom: 15px;
    background: rgba(255,255,255,0.15);
    color: #fff;
    font-size: 1rem;
  }

  select option {
    color: #000;
  }

  .btn {
    display: block;
    background: #43a047;
    color: #fff;
    padding: 12px;
    border-radius: 8px;
    margin: 10px 0;
    text-decoration: none;
    font-weight: bold;
  }

  .btn-whatsapp {
    background: #25D366;
  }

  footer {
    margin-top: 12px;
    opacity: 0.7;
    font-size: 0.8rem;
    line-height: 1.3rem;
  }
</style>

</head>
<body>

<div class="box">
  <h1>Mine-LITE-Api</h1>
  <p>Descarga cualquier versi√≥n desde nuestros Servidores.</p>

  <!-- MEN√ö DESPLEGABLE -->
  <label class="select-label">Elige una versi√≥n:</label>
  <select id="versionSelector"></select>
<div id="info" style="text-align:left; font-size:0.85rem; opacity:0.85; margin-bottom:12px;">
  Selecciona una versi√≥n para ver detalles
</div>

  <!-- BOT√ìN -->
  <a id="downloadBtn" class="btn" href="#">Descargar APK</a>

  <a class="btn btn-whatsapp" href="https://whatsapp.com/channel/0029Vb6os8sEquiSiC9mHw1M" target="_blank">
    Canal de WhatsApp
  </a>

  <footer>
    ¬© 2025 Minecraft Free<br>
    P√°gina v1.1
  </footer>
</div>

<script>
const selector = document.getElementById("versionSelector");
const btn = document.getElementById("downloadBtn");
const info = document.getElementById("info");

async function loadReleases() {
  try {
    const res = await fetch(
      "https://api.github.com/repos/thiagowiegert/Mine-LITE-Api/releases"
    );
    const releases = await res.json();

    selector.innerHTML = "";

    // Ordenar por fecha (m√°s nuevo primero)
    releases.sort(
      (a, b) => new Date(b.published_at) - new Date(a.published_at)
    );

    releases.forEach(rel => {
      if (!rel.assets || rel.assets.length === 0) return;

      const apk = rel.assets.find(a => a.name.endsWith(".apk"));
      if (!apk) return;

      const option = document.createElement("option");
      option.value = apk.browser_download_url;
      option.textContent = rel.tag_name || rel.name || "Versi√≥n sin nombre";

      // Datos extra
      option.dataset.size =
        (apk.size / 1024 / 1024).toFixed(2) + " MB";
      option.dataset.date =
        new Date(rel.published_at).toLocaleDateString();
      option.dataset.notes =
        rel.body ? rel.body.replace(/\n/g, "<br>") : "Sin notas";

      selector.appendChild(option);
    });

    if (selector.options.length > 0) {
      selector.selectedIndex = 0;
      updateInfo();
    }

  } catch (e) {
    info.innerHTML = "‚ùå Error cargando versiones";
    console.error(e);
  }
}

function updateInfo() {
  const opt = selector.selectedOptions[0];

  btn.href = opt.value;

  info.innerHTML = `
    <strong>üìù Notas:</strong><br>${opt.dataset.notes}<br><br>
    <strong>üì¶ Tama√±o:</strong> ${opt.dataset.size}<br>
    <strong>üìÖ Lanzamiento:</strong> ${opt.dataset.date}
  `;
}

selector.addEventListener("change", updateInfo);

loadReleases();
</script>

</body>
</html>